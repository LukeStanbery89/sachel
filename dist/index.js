var e,r=require("process"),t=require("path"),n=require("fs");var i,o=(e={readCacheFileContents:function(e){try{const r=n.readFileSync(e);return void 0===r?{}:JSON.parse(r)}catch(r){return console.error("[GET_CACHE_FILE] error: ",r),n.existsSync(e)||n.mkdirSync(e),{}}},writeCacheToFS:function(e,r){try{return n.writeFileSync(e,JSON.stringify(r)),!0}catch(t){return console.error("[WRITE_CACHE_TO_FS] error: ",t,e,r,typeof r),!1}}}).readCacheFileContents,c=e.writeCacheToFS;function a(){return Math.floor((new Date).getTime()/1e3).toString()}var u=(i={cacheRecordIsStale:function(e){return a()>=e.expires},removeCacheRecord:function(e,r){return delete e[r],e},getCurrentTimeStamp:a,generateExpiryTimestamp:function(e,r){return(BigInt(e)+BigInt(r)).toString()}}).cacheRecordIsStale,s=i.removeCacheRecord,l=i.getCurrentTimeStamp,d=i.generateExpiryTimestamp;const f=t.join(r.cwd(),"/.satchel-cache"),p=t.join(f,"/cache.json");function h(e){let r=o(p);return r=s(r,e),c(p,r)}module.exports={all:function(){return o(p)},write:function(e,r,t=15){let n=o(p);return n[e]={expires:d(l(),6e4*t),data:r},c(p,n)},read:function(e){let r=o(p);if(r[e])return u(r[e])?void h(e):r[e].data},remove:h,hydrate:function(e,r=15){let t=o(p);return!!t[e]&&(t[e].expires=d(l(),6e4*r),c(p,t))},invalidate:function(e){let r=o(p);return!!r[e]&&(r[e].expires="-1",c(p,r))},getExpiry:function(e){return o(p)[e]?.expires||void 0},setExpiry:function(e,r){let t=o(p);return!!t[e]&&(t[e].expires=r,c(p,t))}};
//# sourceMappingURL=index.js.map
