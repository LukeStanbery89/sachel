var e,r=require("process"),t=require("path"),n=require("fs");var i,c=(e={readCacheFileContents:function(e){try{const r=n.readFileSync(e);return void 0===r?{}:JSON.parse(r)}catch(r){const i=t.dirname(e);return n.existsSync(i)?console.error("[GET_CACHE_FILE_ERROR]",e,r):(console.log("Creating cache directory..."),n.mkdirSync(i)),{}}},writeCacheToFS:function(e,r){try{return n.writeFileSync(e,JSON.stringify(r)),!0}catch(t){return console.error("[WRITE_CACHE_TO_FS_ERROR]",e,typeof r,r,t),!1}}}).readCacheFileContents,o=e.writeCacheToFS;function a(){return Math.floor((new Date).getTime()/1e3).toString()}var u=(i={cacheRecordIsStale:function(e){return a()>=e.expires},removeCacheRecord:function(e,r){return delete e[r],e},getCurrentTimeStamp:a,generateExpiryTimestamp:function(e,r){return(BigInt(e)+BigInt(r)).toString()}}).cacheRecordIsStale,s=i.removeCacheRecord,l=i.getCurrentTimeStamp,d=i.generateExpiryTimestamp;const f=t.join(r.cwd(),"/.satchel-cache"),p=t.join(f,"/cache.json");function h(e){let r=c(p);return r=s(r,e),o(p,r)}module.exports={all:function(){return c(p)},write:function(e,r,t=15){let n=c(p);return n[e]={expires:d(l(),6e4*t),data:r},o(p,n)},read:function(e){let r=c(p);if(r[e])return u(r[e])?void h(e):r[e].data},remove:h,hydrate:function(e,r=15){let t=c(p);return!!t[e]&&(t[e].expires=d(l(),6e4*r),o(p,t))},invalidate:function(e){let r=c(p);return!!r[e]&&(r[e].expires="-1",o(p,r))},getExpiry:function(e){return c(p)[e]?.expires||void 0},setExpiry:function(e,r){let t=c(p);return!!t[e]&&(t[e].expires=r,o(p,t))}};
//# sourceMappingURL=index.js.map
