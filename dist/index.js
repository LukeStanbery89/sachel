var e,r=require("process"),t=require("path"),n=require("fs");var i,o=(e={readCacheFileContents:function(e){try{const r=n.readFileSync(e);return JSON.parse(r)}catch(r){return console.error("[GET_CACHE_FILE] error: ",r),n.existsSync(e)||n.mkdirSync(e),{}}},writeCacheToFS:function(e,r){try{return n.writeFileSync(e,JSON.stringify(r)),!0}catch(t){return console.error("[WRITE_CACHE_TO_FS] error: ",t,e,r,typeof r),!1}}}).readCacheFileContents,c=e.writeCacheToFS;function a(){return Math.floor((new Date).getTime()/1e3).toString()}var u=(i={cacheRecordIsStale:function(e){return a()>=e.expires},removeCacheRecord:function(e,r){return delete e[r],e},getCurrentTimeStamp:a,generateExpiryTimestamp:function(e,r){return(BigInt(e)+BigInt(r)).toString()}}).cacheRecordIsStale,s=i.removeCacheRecord,l=i.getCurrentTimeStamp,d=i.generateExpiryTimestamp;const p=t.join(r.cwd(),"/.satchel-cache"),f=t.join(p,"/cache.json");function h(e){let r=o(f);return r=s(r,e),c(f,r)}module.exports={all:function(){return o(f)},write:function(e,r){let t=o(f);return t[e]={expires:d(l(),9e5),data:r},c(f,t)},read:function(e){try{let r=o(f);return r[e]?u(r[e])?void h(e):r[e].data:void 0}catch(e){return void console.error("[READ] error: ",e)}},remove:h,hydrate:function(e){let r=o(f);return!!r[e]&&(r[e].expires=d(l(),9e5),c(f,r))},invalidate:function(e){let r=o(f);return!!r[e]&&(r[e].expires=l(),c(f,r))},getExpiry:function(e){return o(f)[e]?.expires||void 0},setExpiry:function(e,r){let t=o(f);return!!t[e]&&(t[e].expires=r,c(f,t))}};
//# sourceMappingURL=index.js.map
